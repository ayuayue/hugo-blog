---
title: 给hexo申请证书并设置https
date: 2020-05-10T19:31:54+08:00
tags: [hexo]
categories: [hexo]
---

​ 前面可以说是完成了整个项目的迁移及重新部署,重新设置自动化以及初始化一些操作,现在已经可以正常的进行使用了,但是因为在做`webhooks`时使用的是`bash`命令,无法判断提交的是那个分支,所以每次仓库只要有提交记录服务器端就会`pull`下来,可以使用其他语言写一个脚本来监测某一个分支的提交事件,减少资源的浪费.过程就不在实现,具体可以百度看看实现的步骤.

<!--more-->

接下来开始为项目设置`https`访问,我使用的环境是`centos 7 + 宝塔面板 + Let's Encrypt`,这个平台的证书操作比较简单而且是免费的,有效期只有三个月,可以在快要到期的时候去续签,这些操作宝塔都可以为我们更方便的去执行.

1. 先去添加一个网站,将需要绑定的域名都设置进去

   ![1589288378744](/images/hexo-04/1589288378744.png)

2. 进入设置页面,我绑定的是两个域名

   ![1589288404150](/images/hexo-04/1589288404150.png)

3. 选择`ssl`并使用`Let's Encrypt`进行申请,将所有的域名都勾选上,选择文件校验,点击申请后会在项目下生成一系列的文件,用来验证证书,也会自动在`nginx`的配置文件里添加`vhost`,不用在手动去修改`nginx`的配置添加规则

   ![1589288422881](/images/hexo-04/1589288422881.png)
